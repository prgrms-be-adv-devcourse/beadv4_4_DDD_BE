# 공통 기본 설정 (환경 공통)
mysql:
  enabled: true
  image:
    tag: "8.0"
  auth:
    rootPassword: ""    # .env.k3s-*에서 주입
    database: ""        # .env.k3s-*에서 주입

# MySQL Exporter (Prometheus 메트릭, 별도 차트)
mysql-exporter:
  enabled: true
  mysql:
    host: "modeunsa-infra-mysql"
    port: 3306
    user: "root"
    password: ""        # .env.k3s-*에서 주입 (mysql.auth.rootPassword 와 동일하게)

redis:
  enabled: true
  image:
    tag: "7-alpine"
  auth:
    password: ""        # .env.k3s-*에서 주입

elasticsearch:
  enabled: true
  image:
    tag: "9.2.2"
  javaOpts: "-Xms512m -Xmx512m"
  plugins: "analysis-nori"

prometheus:
  enabled: true
  image:
    tag: "latest"
  scrapeInterval: "15s"
  scrapeConfigs:
    - jobName: "api-gateway-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-api-gateway-api:8080"
    - jobName: "payment-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-payment-api:8083"
    - jobName: "order-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-order-api:8082"
    - jobName: "settlement-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-settlement-api:8084"
    - jobName: "member-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-member-api:8086"
    - jobName: "product-api"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-product-api:8081"
    - jobName: "mysql"
      metricsPath: "/metrics"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-infra-mysql-exporter:9104"

grafana:
  enabled: true
  image:
    tag: "latest"
  auth:
    adminUser: ""       # .env.k3s-*에서 주입
    adminPassword: ""   # .env.k3s-*에서 주입
  server:
    serveFromSubPath: true

kafka:
  enabled: true
  image:
    tag: "3.7.0"

kafkaui:
  enabled: true
  image:
    tag: "latest"
  kafka:
    bootstrapServers: "modeunsa-infra-kafka:9092"

ingress:
  enabled: false        # dev에서는 NodePort 사용, prod에서 true로 덮어씀

cert-manager:
  enabled: false
  email: ""
  server: "https://acme-v02.api.letsencrypt.org/directory"
  ingressClass: traefik