# 공통 기본 설정 (환경 공통)
mysql:
  enabled: true
  image:
    tag: "8.0"
  auth:
    rootPassword: ""    # .env에서 주입
    database: ""        # .env에서 주입

# MySQL Exporter (Prometheus 메트릭, 별도 차트)
mysql-exporter:
  enabled: true
  mysql:
    host: "modeunsa-infra-mysql"
    port: 3306
    user: "root"
    password: ""        # .env에서 주입 (mysql.auth.rootPassword 와 동일하게)

redis:
  enabled: true
  image:
    tag: "7-alpine"
  auth:
    password: ""        # .env에서 주입

elasticsearch:
  enabled: true
  image:
    tag: "9.2.2"
  javaOpts: "-Xms512m -Xmx512m"
  plugins: "analysis-nori"

prometheus:
  enabled: true
  image:
    tag: "latest"
  scrapeInterval: "15s"
  scrapeConfigs:
    - jobName: "modeunsa-app"
      metricsPath: "/actuator/prometheus"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-app-api:8080"
    - jobName: "mysql"
      metricsPath: "/metrics"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-infra-mysql-exporter:9104"

    # Kubernetes cluster state metrics (for Grafana dashboards)
    - jobName: "kube-state-metrics"
      metricsPath: "/metrics"
      scrapeInterval: "15s"
      scrapeTimeout: "10s"
      targets:
        - "modeunsa-infra-kube-state-metrics:8080"

    # (선택) kubelet / cAdvisor 메트릭 예시 - 노드 IP/포트는 클러스터 환경에 맞게 수정 필요
    # - jobName: "kubelet"
    #   metricsPath: "/metrics"
    #   scrapeInterval: "15s"
    #   scrapeTimeout: "10s"
    #   targets:
    #     - "10.0.0.1:10250"
    #     - "10.0.0.2:10250"
    # - jobName: "kubelet-cadvisor"
    #   metricsPath: "/metrics/cadvisor"
    #   scrapeInterval: "15s"
    #   scrapeTimeout: "10s"
    #   targets:
    #     - "10.0.0.1:10250"
    #     - "10.0.0.2:10250"

grafana:
  enabled: true
  image:
    tag: "latest"
  auth:
    adminUser: ""       # .env에서 주입
    adminPassword: ""   # .env에서 주입
  server:
    serveFromSubPath: true

kafka:
  enabled: true
  image:
    tag: "3.7.0"

kafkaui:
  enabled: true
  image:
    tag: "latest"
  kafka:
    bootstrapServers: "modeunsa-infra-kafka:9092"

kube-state-metrics:
  enabled: true


ingress:
  enabled: false        # dev에서는 NodePort 사용, prod에서 true로 덮어씀

cert-manager:
  enabled: false
  email: ""
  server: "https://acme-v02.api.letsencrypt.org/directory"
  ingressClass: traefik